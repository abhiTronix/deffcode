<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="A High-performance Real-time Video frames Generator for generating blazingly fast video frames in python 🔥"><meta name=author content="Abhishek Thakur"><link href=https://abhitronix.github.io/deffcode/v0.2.6-dev/recipes/advanced/decode-live-virtual-sources/ rel=canonical><link href=../ rel=prev><link href=../decode-live-feed-devices/ rel=next><link rel=icon href=../../../assets/images/favicon-32x32.png><meta name=generator content="mkdocs-1.4.3, mkdocs-material-9.1.15"><title>Decoding Live Virtual Sources - DeFFcode</title><link rel=stylesheet href=../../../assets/stylesheets/main.26e3688c.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.ecc896b0.min.css><script src=https://sidecar.gitter.im/dist/sidecar.v1.js async defer></script><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Libre+Franklin:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Libre Franklin";--md-code-font:"JetBrains Mono"}</style><link rel=stylesheet href=../../../assets/_mkdocstrings.css><link rel=stylesheet href=../../../assets/stylesheets/custom.css><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-131929464-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");ga("send","event","feedback","click",t,e),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){ga("send","pageview",e.pathname)})});var e=document.createElement("script");e.async=!0,e.src="https://www.google-analytics.com/analytics.js",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script><meta property=og:type content=website><meta property=og:title content="DeFFcode - Decoding Live Virtual Sources"><meta property=og:description content="A High-performance Real-time Video frames Generator for generating blazingly fast video frames in python 🔥"><meta content=https://abhitronix.github.io/deffcode/v0.2.6-dev/recipes/advanced/decode-live-virtual-sources/ property=og:url><meta property=og:image content=https://abhitronix.github.io/deffcode/v0.2.6-dev/assets/images/decode-banner.png><meta property=og:image:type content=image/png><meta property=og:image:width content=1200><meta property=og:image:height content=630><meta name=twitter:card content=summary_large_image><meta name=twitter:site content=@abhi_una12><meta name=twitter:creator content=@abhi_una12><meta name=twitter:title content="DeFFcode - Decoding Live Virtual Sources"><meta name=twitter:description content="A High-performance Real-time Video frames Generator for generating blazingly fast video frames in python 🔥"><meta name=twitter:image content=https://abhitronix.github.io/deffcode/v0.2.6-dev/assets/images/decode-banner.png></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=light-green data-md-color-accent=green> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#decoding-live-virtual-sources class=md-skip> Skip to content </a> </div> <div data-md-component=announce> <aside class=md-banner> <div class="md-banner__inner md-grid md-typeset"> <!-- Add announcement here, including arbitrary HTML --> <b>Hey, Index based Camera Device Capture support has been added in <code>v0.2.4</code>. Checkout these <a href=https://abhitronix.github.io/deffcode/v0.2.6-dev/recipes/basic/decode-camera-devices/#decoding-camera-devices-using-indexes>new recipes <span class=twemoji> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8 1.5a3.35 3.35 0 0 0 0 6.7h1.53c.39 0 .76.1 1.08.3h2.02c-.58-1.05-1.77-1.75-3.1-1.75H8c-1 0-1.85-.98-1.85-2S7 3 8 3V1.5m4.85.5c0 1-.85 1.85-1.85 1.85v1.5c1.92 0 3.5 1.35 3.89 3.15h1.53a5.541 5.541 0 0 0-3.07-4.12c.62-.61 1-1.45 1-2.38h-1.5M3 10v2h2v7a2 2 0 0 0 2 2h10c1.11 0 2-.89 2-2v-7h2v-2H3m4 2h10v7H7v-7Z"/></svg> </span> ➶</a></b> </div> </aside> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> <aside class="md-banner md-banner--warning"> <div class="md-banner__inner md-grid md-typeset"> You're not viewing the latest version. <a href=../../../..> <strong>Click here to go to latest.</strong> </a> </div> <script>var el=document.querySelector("[data-md-component=outdated]"),outdated=__md_get("__outdated",sessionStorage);!0===outdated&&el&&(el.hidden=!1)</script> </aside> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title=DeFFcode class="md-header__button md-logo" aria-label=DeFFcode data-md-component=logo> <img src=../../../assets/images/android-chrome-192x192.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> DeFFcode </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Decoding Live Virtual Sources </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=light-green data-md-color-accent=green aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 384 512"><!-- Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M297.2 248.9c14.4-20.6 22.8-45.7 22.8-72.9 0-70.7-57.3-128-128-128S64 105.3 64 176c0 27.2 8.4 52.3 22.8 72.9 3.7 5.3 8.1 11.3 12.8 17.7 12.9 17.7 28.3 38.9 39.8 59.8 10.4 19 15.7 38.8 18.3 57.5H109c-2.2-12-5.9-23.7-11.8-34.5-9.9-18-22.2-34.9-34.5-51.8-5.2-7.1-10.4-14.2-15.4-21.4C27.6 247.9 16 213.3 16 176 16 78.8 94.8 0 192 0s176 78.8 176 176c0 37.3-11.6 71.9-31.4 100.3-5 7.2-10.2 14.3-15.4 21.4-12.3 16.8-24.6 33.7-34.5 51.8-5.9 10.8-9.6 22.5-11.8 34.5h-48.5c2.6-18.7 7.9-38.6 18.3-57.5 11.5-20.9 26.9-42.1 39.8-59.8 4.7-6.4 9-12.4 12.7-17.7zM192 128c-26.5 0-48 21.5-48 48 0 8.8-7.2 16-16 16s-16-7.2-16-16c0-44.2 35.8-80 80-80 8.8 0 16 7.2 16 16s-7.2 16-16 16zm0 384c-44.2 0-80-35.8-80-80v-16h160v16c0 44.2-35.8 80-80 80z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=amber data-md-color-accent=lime aria-label="Switch to light mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 384 512"><!-- Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M272 384c9.6-31.9 29.5-59.1 49.2-86.2 5.2-7.1 10.4-14.2 15.4-21.4 19.8-28.5 31.4-63 31.4-100.3C368 78.8 289.2 0 192 0S16 78.8 16 176c0 37.3 11.6 71.9 31.4 100.3 5 7.2 10.2 14.3 15.4 21.4 19.8 27.1 39.7 54.4 49.2 86.2h160zm-80 128c44.2 0 80-35.8 80-80v-16H112v16c0 44.2 35.8 80 80 80zm-80-336c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-61.9 50.1-112 112-112 8.8 0 16 7.2 16 16s-7.2 16-16 16c-44.2 0-80 35.8-80 80z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/abhiTronix/deffcode title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> abhiTronix/deffcode </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../basic/ class="md-tabs__link md-tabs__link--active"> Recipies </a> </li> <li class=md-tabs__item> <a href=../../../reference/ffdecoder/ class=md-tabs__link> API References </a> </li> <li class=md-tabs__item> <a href=../../../help/ class=md-tabs__link> Help Section </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title=DeFFcode class="md-nav__button md-logo" aria-label=DeFFcode data-md-component=logo> <img src=../../../assets/images/android-chrome-192x192.png alt=logo> </a> DeFFcode </label> <div class=md-nav__source> <a href=https://github.com/abhiTronix/deffcode title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> abhiTronix/deffcode </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_1> <label class=md-nav__link for=__nav_1 id=__nav_1_label tabindex=0> Home <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_1_label aria-expanded=false> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> Home </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_1_1> <div class="md-nav__link md-nav__link--index "> <a href=../../..>Introduction</a> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_1_1_label aria-expanded=false> <label class=md-nav__title for=__nav_1_1> <span class="md-nav__icon md-icon"></span> Introduction </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_1_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../installation/ >Installation Notes</a> <label for=__nav_1_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_1_2_label aria-expanded=false> <label class=md-nav__title for=__nav_1_2> <span class="md-nav__icon md-icon"></span> Installation Notes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../installation/ffmpeg_install/ class=md-nav__link> FFmpeg Installation </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_1_3> <div class="md-nav__link md-nav__link--index "> <a href=../../../contribution/ >Contribution Guidelines</a> <label for=__nav_1_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_1_3_label aria-expanded=false> <label class=md-nav__title for=__nav_1_3> <span class="md-nav__icon md-icon"></span> Contribution Guidelines </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../contribution/issue/ class=md-nav__link> Issue Guidelines </a> </li> <li class=md-nav__item> <a href=../../../contribution/PR/ class=md-nav__link> Pull Request(PR) Guidelines </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../changelog/ class=md-nav__link> Changelog </a> </li> <li class=md-nav__item> <a href=../../../license/ class=md-nav__link> License </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2 checked> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> Recipies <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=true> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Recipies </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_1> <div class="md-nav__link md-nav__link--index "> <a href=../../basic/ >Basic Recipes</a> <label for=__nav_2_1> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_1_label aria-expanded=false> <label class=md-nav__title for=__nav_2_1> <span class="md-nav__icon md-icon"></span> Basic Recipes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../basic/decode-video-files/ class=md-nav__link> Decoding Video Files </a> </li> <li class=md-nav__item> <a href=../../basic/decode-camera-devices/ class=md-nav__link> Decoding Camera Devices </a> </li> <li class=md-nav__item> <a href=../../basic/decode-network-streams/ class=md-nav__link> Decoding Network Streams </a> </li> <li class=md-nav__item> <a href=../../basic/decode-image-sequences/ class=md-nav__link> Decoding Image sequences </a> </li> <li class=md-nav__item> <a href=../../basic/transcode-live-frames/ class=md-nav__link> Transcoding Live frames </a> </li> <li class=md-nav__item> <a href=../../basic/transcode-live-frames-simplegraphs/ class=md-nav__link> Transcoding Live Simple Filtergraphs </a> </li> <li class=md-nav__item> <a href=../../basic/save-keyframe-image/ class=md-nav__link> Saving Key-frames as Image </a> </li> <li class=md-nav__item> <a href=../../basic/extract-video-metadata/ class=md-nav__link> Extracting video metadata </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2 checked> <div class="md-nav__link md-nav__link--index "> <a href=../ >Advanced Recipies</a> <label for=__nav_2_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_2_label aria-expanded=true> <label class=md-nav__title for=__nav_2_2> <span class="md-nav__icon md-icon"></span> Advanced Recipies </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Decoding Live Virtual Sources <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Decoding Live Virtual Sources </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#generate-and-decode-frames-from-sierpinski-pattern class=md-nav__link> Generate and Decode frames from Sierpinski pattern </a> </li> <li class=md-nav__item> <a href=#generate-and-decode-frames-from-test-source-pattern class=md-nav__link> Generate and Decode frames from Test Source pattern </a> </li> <li class=md-nav__item> <a href=#generate-and-decode-frames-from-gradients-with-custom-text-effect class=md-nav__link> Generate and Decode frames from Gradients with custom Text effect </a> </li> <li class=md-nav__item> <a href=#generate-and-decode-frames-from-mandelbrot-test-pattern-with-vectorscope-waveforms class=md-nav__link> Generate and Decode frames from Mandelbrot test pattern with vectorscope &amp; waveforms </a> </li> <li class=md-nav__item> <a href=#generate-and-decode-frames-from-game-of-life-visualization class=md-nav__link> Generate and Decode frames from Game of Life Visualization </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../decode-live-feed-devices/ class=md-nav__link> Decoding Live Feed Devices </a> </li> <li class=md-nav__item> <a href=../decode-hw-acceleration/ class=md-nav__link> Hardware-Accelerated Video Decoding </a> </li> <li class=md-nav__item> <a href=../transcode-live-frames-complexgraphs/ class=md-nav__link> Transcoding Live Complex Filtergraphs </a> </li> <li class=md-nav__item> <a href=../transcode-art-filtergraphs/ class=md-nav__link> Transcoding Video Art with Filtergraphs </a> </li> <li class=md-nav__item> <a href=../transcode-hw-acceleration/ class=md-nav__link> Hardware-Accelerated Video Transcoding </a> </li> <li class=md-nav__item> <a href=../update-metadata/ class=md-nav__link> Updating Video Metadata </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> API References <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> API References </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1> <div class="md-nav__link md-nav__link--index "> <a href=../../../reference/ffdecoder/ >deffcode.FFdecoder</a> <label for=__nav_3_1> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_1_label aria-expanded=false> <label class=md-nav__title for=__nav_3_1> <span class="md-nav__icon md-icon"></span> deffcode.FFdecoder </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../reference/ffdecoder/params/ class=md-nav__link> API Parameters </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_2> <div class="md-nav__link md-nav__link--index "> <a href=../../../reference/sourcer/ >deffcode.Sourcer</a> <label for=__nav_3_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> deffcode.Sourcer </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../reference/sourcer/params/ class=md-nav__link> API Parameters </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../reference/ffhelper/ class=md-nav__link> deffcode.ffhelper </a> </li> <li class=md-nav__item> <a href=../../../reference/utils/ class=md-nav__link> deffcode.utils </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> Help Section <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Help Section </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../help/ class=md-nav__link> Help Us </a> </li> <li class=md-nav__item> <a href=../../../help/get_help/ class=md-nav__link> Get Help </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#generate-and-decode-frames-from-sierpinski-pattern class=md-nav__link> Generate and Decode frames from Sierpinski pattern </a> </li> <li class=md-nav__item> <a href=#generate-and-decode-frames-from-test-source-pattern class=md-nav__link> Generate and Decode frames from Test Source pattern </a> </li> <li class=md-nav__item> <a href=#generate-and-decode-frames-from-gradients-with-custom-text-effect class=md-nav__link> Generate and Decode frames from Gradients with custom Text effect </a> </li> <li class=md-nav__item> <a href=#generate-and-decode-frames-from-mandelbrot-test-pattern-with-vectorscope-waveforms class=md-nav__link> Generate and Decode frames from Mandelbrot test pattern with vectorscope &amp; waveforms </a> </li> <li class=md-nav__item> <a href=#generate-and-decode-frames-from-game-of-life-visualization class=md-nav__link> Generate and Decode frames from Game of Life Visualization </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=decoding-live-virtual-sources><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 9h1v2h-3V7h2v2m5.5 0-2.12-2.12 1.25-1.25L20 8v2h-2v1h-3V9h3.5M13 3.5V2h-1v2h1v2h-2V4H9V2H8v2H6v1H4V4c0-1.11.89-2 2-2h8l2.36 2.36-1.25 1.25L13 3.5M20 20a2 2 0 0 1-2 2h-2v-2h2v-1h2v1m-2-5h2v3h-2v-3m-6 7v-2h3v2h-3m-4 0v-2h3v2H8m-2 0a2 2 0 0 1-2-2v-2h2v2h1v2H6m-2-8h2v3H4v-3m0-4h2v3H4v-3m14 1h2v3h-2v-3M4 6h2v3H4V6Z"/></svg></span> Decoding Live Virtual Sources<a class=headerlink href=#decoding-live-virtual-sources title="Anchor link to this section for reference">&para;</a></h1> <blockquote> <p>Instead of using prerecorded video files as streams, DeFFcode's FFdecoder API with the help of powerful <a href=http://underpop.online.fr/f/ffmpeg/help/lavfi.htm.gz><code>lavfi</code></a> <em>(<strong>Libavfilter</strong> input virtual device)</em> source that reads data from the open output pads of a libavfilter filtergraph, is also capable of creating virtual video frames out of thin air in real-time, which you might want to use as input for testing, compositing, and merging with other streams to obtain desired output on-the-fly. </p> </blockquote> <p>We'll discuss the recipies for generating Live Fake Sources briefly below:</p> <p>&thinsp;</p> <div class="admonition warning"> <p class=admonition-title>DeFFcode APIs requires FFmpeg executable</p> <p><mark>DeFFcode APIs <strong>MUST</strong> requires valid FFmpeg executable for all of its core functionality</mark>, and any failure in detection will raise <code>RuntimeError</code> immediately. Follow dedicated <a href=../../../installation/ffmpeg_install/ >FFmpeg Installation doc ➶</a> for its installation.</p> </div> <details class=info> <summary>Additional Python Dependencies for following recipes</summary> <p>Following recipes requires additional python dependencies which can be installed easily as below:</p> <ul class=task-list> <li class=task-list-item> <p><label class=task-list-control><input type=checkbox disabled checked><span class=task-list-indicator></span></label> <strong>OpenCV:</strong> OpenCV is required for previewing video frames. You can easily install it directly via <a href=https://pypi.org/project/opencv-python/ ><code>pip</code></a>:</p> <details class=tip> <summary>OpenCV installation from source</summary> <p>You can also follow online tutorials for building &amp; installing OpenCV on <a href=https://www.learnopencv.com/install-opencv3-on-windows/ >Windows</a>, <a href=https://www.pyimagesearch.com/2018/05/28/ubuntu-18-04-how-to-install-opencv/ >Linux</a>, <a href=https://www.pyimagesearch.com/2018/08/17/install-opencv-4-on-macos/ >MacOS</a> and <a href=https://www.pyimagesearch.com/2018/09/26/install-opencv-4-on-your-raspberry-pi/ >Raspberry Pi</a> machines manually from its source. </p> <p><img alt=⚠ class=twemoji src=https://cdn.jsdelivr.net/gh/jdecked/twemoji@14.1.2/assets/svg/26a0.svg title=:warning:> Make sure not to install both <em>pip</em> and <em>source</em> version together. Otherwise installation will fail to work!</p> </details> <details class=info> <summary>Other OpenCV binaries</summary> <p>OpenCV maintainers also provide additional binaries via pip that contains both main modules and contrib/extra modules <a href=https://pypi.org/project/opencv-contrib-python/ ><code>opencv-contrib-python</code></a>, and for server (headless) environments like <a href=https://pypi.org/project/opencv-python-headless/ ><code>opencv-python-headless</code></a> and <a href=https://pypi.org/project/opencv-contrib-python-headless/ ><code>opencv-contrib-python-headless</code></a>. You can also install <mark>any one of them</mark> in similar manner. More information can be found <a href=https://github.com/opencv/opencv-python#installation-and-usage>here</a>.</p> </details> <div class=highlight><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a>pip<span class=w> </span>install<span class=w> </span>opencv-python<span class=w>       </span>
</code></pre></div> </li> </ul> </details> <div class="admonition note"> <p class=admonition-title>Always use FFdecoder API's <a href=../../reference/ffdecoder/#deffcode.ffdecoder.FFdecoder.terminate><code>terminate()</code></a> method at the end to avoid undesired behavior.</p> </div> <details class=danger> <summary>Never name your python script <code>deffcode.py</code></summary> <p>When trying out these recipes, never name your python script <code>deffcode.py</code> otherwise it will result in <code>ModuleNotFound</code> error.</p> </details> <p>&thinsp;</p> <h2 id=generate-and-decode-frames-from-sierpinski-pattern>Generate and Decode frames from Sierpinski pattern<a class=headerlink href=#generate-and-decode-frames-from-sierpinski-pattern title="Anchor link to this section for reference">&para;</a></h2> <blockquote> <p>The <a href=https://ffmpeg.org/ffmpeg-filters.html#toc-sierpinski><code>sierpinski</code></a> graph generates a Sierpinski carpet/triangle fractal, and randomly pan around by a single pixel each frame.</p> </blockquote> <figure> <p><img alt="sierpinski pattern" src=../../../assets/gifs/sierpinski.gif width=500> </p> <figcaption>Sierpinski carpet fractal</figcaption> </figure> <p>In this example we will generate and decode 8 seconds of a <strong>Sierpinski carpet fractal pattern</strong> of <code>1280x720</code> frame size and <code>30</code> framerate using <a href=https://ffmpeg.org/ffmpeg-filters.html#toc-sierpinski><code>sierpinski</code></a> graph source with <code>lavfi</code> input virtual device in FFdecoder API, and preview decoded frames using OpenCV Library's <code>cv2.imshow()</code> method in real-time. </p> <div class="admonition alert"> <p class=admonition-title>By default, OpenCV expects <code>BGR</code> format frames in its <code>cv2.imshow()</code> method.</p> </div> <div class=highlight><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=c1># import the necessary packages</span>
<a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a><span class=kn>from</span> <span class=nn>deffcode</span> <span class=kn>import</span> <span class=n>FFdecoder</span>
<a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a><span class=kn>import</span> <span class=nn>cv2</span>
<a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a>
<a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a><span class=c1># playback time of 8 seconds</span>
<a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a><span class=n>ffparams</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&quot;-ffprefixes&quot;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&quot;-t&quot;</span><span class=p>,</span> <span class=s2>&quot;8&quot;</span><span class=p>]}</span>
<a id=__codelineno-1-7 name=__codelineno-1-7 href=#__codelineno-1-7></a>
<a id=__codelineno-1-8 name=__codelineno-1-8 href=#__codelineno-1-8></a><span class=c1># initialize and formulate the decoder with &quot;sierpinski&quot; source of</span>
<a id=__codelineno-1-9 name=__codelineno-1-9 href=#__codelineno-1-9></a><span class=c1># `1280x720` frame size and `30` framerate for BGR24 output</span>
<a id=__codelineno-1-10 name=__codelineno-1-10 href=#__codelineno-1-10></a><span class=n>decoder</span> <span class=o>=</span> <span class=n>FFdecoder</span><span class=p>(</span>
<a id=__codelineno-1-11 name=__codelineno-1-11 href=#__codelineno-1-11></a>    <span class=s2>&quot;sierpinski=size=1280x720:rate=30&quot;</span><span class=p>,</span>
<a id=__codelineno-1-12 name=__codelineno-1-12 href=#__codelineno-1-12></a>    <span class=n>source_demuxer</span><span class=o>=</span><span class=s2>&quot;lavfi&quot;</span><span class=p>,</span>
<a id=__codelineno-1-13 name=__codelineno-1-13 href=#__codelineno-1-13></a>    <span class=n>frame_format</span><span class=o>=</span><span class=s2>&quot;bgr24&quot;</span><span class=p>,</span>
<a id=__codelineno-1-14 name=__codelineno-1-14 href=#__codelineno-1-14></a>    <span class=o>**</span><span class=n>ffparams</span>
<a id=__codelineno-1-15 name=__codelineno-1-15 href=#__codelineno-1-15></a><span class=p>)</span><span class=o>.</span><span class=n>formulate</span><span class=p>()</span>
<a id=__codelineno-1-16 name=__codelineno-1-16 href=#__codelineno-1-16></a>
<a id=__codelineno-1-17 name=__codelineno-1-17 href=#__codelineno-1-17></a><span class=c1># grab the BGR24 frame from the decoder</span>
<a id=__codelineno-1-18 name=__codelineno-1-18 href=#__codelineno-1-18></a><span class=k>for</span> <span class=n>frame</span> <span class=ow>in</span> <span class=n>decoder</span><span class=o>.</span><span class=n>generateFrame</span><span class=p>():</span>
<a id=__codelineno-1-19 name=__codelineno-1-19 href=#__codelineno-1-19></a>
<a id=__codelineno-1-20 name=__codelineno-1-20 href=#__codelineno-1-20></a>    <span class=c1># check if frame is None</span>
<a id=__codelineno-1-21 name=__codelineno-1-21 href=#__codelineno-1-21></a>    <span class=k>if</span> <span class=n>frame</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-1-22 name=__codelineno-1-22 href=#__codelineno-1-22></a>        <span class=k>break</span>
<a id=__codelineno-1-23 name=__codelineno-1-23 href=#__codelineno-1-23></a>
<a id=__codelineno-1-24 name=__codelineno-1-24 href=#__codelineno-1-24></a>    <span class=c1># {do something with the frame here}</span>
<a id=__codelineno-1-25 name=__codelineno-1-25 href=#__codelineno-1-25></a>
<a id=__codelineno-1-26 name=__codelineno-1-26 href=#__codelineno-1-26></a>    <span class=c1># Show output window</span>
<a id=__codelineno-1-27 name=__codelineno-1-27 href=#__codelineno-1-27></a>    <span class=n>cv2</span><span class=o>.</span><span class=n>imshow</span><span class=p>(</span><span class=s2>&quot;Output&quot;</span><span class=p>,</span> <span class=n>frame</span><span class=p>)</span>
<a id=__codelineno-1-28 name=__codelineno-1-28 href=#__codelineno-1-28></a>
<a id=__codelineno-1-29 name=__codelineno-1-29 href=#__codelineno-1-29></a>    <span class=c1># check for &#39;q&#39; key if pressed</span>
<a id=__codelineno-1-30 name=__codelineno-1-30 href=#__codelineno-1-30></a>    <span class=n>key</span> <span class=o>=</span> <span class=n>cv2</span><span class=o>.</span><span class=n>waitKey</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span> <span class=o>&amp;</span> <span class=mh>0xFF</span>
<a id=__codelineno-1-31 name=__codelineno-1-31 href=#__codelineno-1-31></a>    <span class=k>if</span> <span class=n>key</span> <span class=o>==</span> <span class=nb>ord</span><span class=p>(</span><span class=s2>&quot;q&quot;</span><span class=p>):</span>
<a id=__codelineno-1-32 name=__codelineno-1-32 href=#__codelineno-1-32></a>        <span class=n>cv2</span><span class=o>.</span><span class=n>imwrite</span><span class=p>(</span><span class=s1>&#39;foo_image.gif&#39;</span><span class=p>,</span> <span class=n>frame</span><span class=p>)</span>
<a id=__codelineno-1-33 name=__codelineno-1-33 href=#__codelineno-1-33></a>        <span class=k>break</span>
<a id=__codelineno-1-34 name=__codelineno-1-34 href=#__codelineno-1-34></a>
<a id=__codelineno-1-35 name=__codelineno-1-35 href=#__codelineno-1-35></a><span class=c1># close output window</span>
<a id=__codelineno-1-36 name=__codelineno-1-36 href=#__codelineno-1-36></a><span class=n>cv2</span><span class=o>.</span><span class=n>destroyAllWindows</span><span class=p>()</span>
<a id=__codelineno-1-37 name=__codelineno-1-37 href=#__codelineno-1-37></a>
<a id=__codelineno-1-38 name=__codelineno-1-38 href=#__codelineno-1-38></a><span class=c1># terminate the decoder</span>
<a id=__codelineno-1-39 name=__codelineno-1-39 href=#__codelineno-1-39></a><span class=n>decoder</span><span class=o>.</span><span class=n>terminate</span><span class=p>()</span>
</code></pre></div> <p>&nbsp;</p> <h2 id=generate-and-decode-frames-from-test-source-pattern>Generate and Decode frames from Test Source pattern<a class=headerlink href=#generate-and-decode-frames-from-test-source-pattern title="Anchor link to this section for reference">&para;</a></h2> <blockquote> <p>The <a href=https://ffmpeg.org/ffmpeg-filters.html#toc-allrgb_002c-allyuv_002c-color_002c-colorchart_002c-colorspectrum_002c-haldclutsrc_002c-nullsrc_002c-pal75bars_002c-pal100bars_002c-rgbtestsrc_002c-smptebars_002c-smptehdbars_002c-testsrc_002c-testsrc2_002c-yuvtestsrc><code>testsrc</code></a> graph generates a test video pattern showing a color pattern, a scrolling gradient, and a timestamp. This is useful for testing purposes.</p> </blockquote> <figure> <p><img alt="testsrc pattern" src=../../../assets/gifs/testsrc.gif width=500> </p> <figcaption>Test Source pattern</figcaption> </figure> <p>In this example we will generate and decode <code>10</code> seconds of a <strong>Test Source pattern</strong> <em>(<code>1280x720</code> frame size &amp; <code>30</code> framerate)</em> using <a href=https://ffmpeg.org/ffmpeg-filters.html#toc-allrgb_002c-allyuv_002c-color_002c-colorchart_002c-colorspectrum_002c-haldclutsrc_002c-nullsrc_002c-pal75bars_002c-pal100bars_002c-rgbtestsrc_002c-smptebars_002c-smptehdbars_002c-testsrc_002c-testsrc2_002c-yuvtestsrc><code>testsrc</code></a> graph source with <code>lavfi</code> input virtual device in FFdecoder API, all while previewing decoded frames using OpenCV Library's <code>cv2.imshow()</code> method in real-time. </p> <div class="admonition alert"> <p class=admonition-title>By default, OpenCV expects <code>BGR</code> format frames in its <code>cv2.imshow()</code> method.</p> </div> <div class=highlight><pre><span></span><code><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=c1># import the necessary packages</span>
<a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a><span class=kn>from</span> <span class=nn>deffcode</span> <span class=kn>import</span> <span class=n>FFdecoder</span>
<a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a><span class=kn>import</span> <span class=nn>cv2</span>
<a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a>
<a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a><span class=c1># define parameters</span>
<a id=__codelineno-2-6 name=__codelineno-2-6 href=#__codelineno-2-6></a><span class=n>ffparams</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-2-7 name=__codelineno-2-7 href=#__codelineno-2-7></a>    <span class=s2>&quot;-ffprefixes&quot;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&quot;-t&quot;</span><span class=p>,</span> <span class=s2>&quot;10&quot;</span><span class=p>],</span>  <span class=c1># playback time of 10 seconds</span>
<a id=__codelineno-2-8 name=__codelineno-2-8 href=#__codelineno-2-8></a><span class=p>}</span>
<a id=__codelineno-2-9 name=__codelineno-2-9 href=#__codelineno-2-9></a>
<a id=__codelineno-2-10 name=__codelineno-2-10 href=#__codelineno-2-10></a><span class=c1># initialize and formulate the decoder with &quot;testsrc&quot; source of</span>
<a id=__codelineno-2-11 name=__codelineno-2-11 href=#__codelineno-2-11></a><span class=c1># `1280x720` frame size and `30` framerate for BGR24 output</span>
<a id=__codelineno-2-12 name=__codelineno-2-12 href=#__codelineno-2-12></a><span class=n>decoder</span> <span class=o>=</span> <span class=n>FFdecoder</span><span class=p>(</span>
<a id=__codelineno-2-13 name=__codelineno-2-13 href=#__codelineno-2-13></a>    <span class=s2>&quot;testsrc=size=1280x720:rate=30&quot;</span><span class=p>,</span>
<a id=__codelineno-2-14 name=__codelineno-2-14 href=#__codelineno-2-14></a>    <span class=n>source_demuxer</span><span class=o>=</span><span class=s2>&quot;lavfi&quot;</span><span class=p>,</span>
<a id=__codelineno-2-15 name=__codelineno-2-15 href=#__codelineno-2-15></a>    <span class=n>frame_format</span><span class=o>=</span><span class=s2>&quot;bgr24&quot;</span><span class=p>,</span>
<a id=__codelineno-2-16 name=__codelineno-2-16 href=#__codelineno-2-16></a>    <span class=o>**</span><span class=n>ffparams</span>
<a id=__codelineno-2-17 name=__codelineno-2-17 href=#__codelineno-2-17></a><span class=p>)</span><span class=o>.</span><span class=n>formulate</span><span class=p>()</span>
<a id=__codelineno-2-18 name=__codelineno-2-18 href=#__codelineno-2-18></a>
<a id=__codelineno-2-19 name=__codelineno-2-19 href=#__codelineno-2-19></a><span class=c1># grab the BGR24 frame from the decoder</span>
<a id=__codelineno-2-20 name=__codelineno-2-20 href=#__codelineno-2-20></a><span class=k>for</span> <span class=n>frame</span> <span class=ow>in</span> <span class=n>decoder</span><span class=o>.</span><span class=n>generateFrame</span><span class=p>():</span>
<a id=__codelineno-2-21 name=__codelineno-2-21 href=#__codelineno-2-21></a>
<a id=__codelineno-2-22 name=__codelineno-2-22 href=#__codelineno-2-22></a>    <span class=c1># check if frame is None</span>
<a id=__codelineno-2-23 name=__codelineno-2-23 href=#__codelineno-2-23></a>    <span class=k>if</span> <span class=n>frame</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-2-24 name=__codelineno-2-24 href=#__codelineno-2-24></a>        <span class=k>break</span>
<a id=__codelineno-2-25 name=__codelineno-2-25 href=#__codelineno-2-25></a>
<a id=__codelineno-2-26 name=__codelineno-2-26 href=#__codelineno-2-26></a>    <span class=c1># {do something with the frame here}</span>
<a id=__codelineno-2-27 name=__codelineno-2-27 href=#__codelineno-2-27></a>
<a id=__codelineno-2-28 name=__codelineno-2-28 href=#__codelineno-2-28></a>    <span class=c1># Show output window</span>
<a id=__codelineno-2-29 name=__codelineno-2-29 href=#__codelineno-2-29></a>    <span class=n>cv2</span><span class=o>.</span><span class=n>imshow</span><span class=p>(</span><span class=s2>&quot;Output&quot;</span><span class=p>,</span> <span class=n>frame</span><span class=p>)</span>
<a id=__codelineno-2-30 name=__codelineno-2-30 href=#__codelineno-2-30></a>
<a id=__codelineno-2-31 name=__codelineno-2-31 href=#__codelineno-2-31></a>    <span class=c1># check for &#39;q&#39; key if pressed</span>
<a id=__codelineno-2-32 name=__codelineno-2-32 href=#__codelineno-2-32></a>    <span class=n>key</span> <span class=o>=</span> <span class=n>cv2</span><span class=o>.</span><span class=n>waitKey</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span> <span class=o>&amp;</span> <span class=mh>0xFF</span>
<a id=__codelineno-2-33 name=__codelineno-2-33 href=#__codelineno-2-33></a>    <span class=k>if</span> <span class=n>key</span> <span class=o>==</span> <span class=nb>ord</span><span class=p>(</span><span class=s2>&quot;q&quot;</span><span class=p>):</span>
<a id=__codelineno-2-34 name=__codelineno-2-34 href=#__codelineno-2-34></a>        <span class=k>break</span>
<a id=__codelineno-2-35 name=__codelineno-2-35 href=#__codelineno-2-35></a>
<a id=__codelineno-2-36 name=__codelineno-2-36 href=#__codelineno-2-36></a><span class=c1># close output window</span>
<a id=__codelineno-2-37 name=__codelineno-2-37 href=#__codelineno-2-37></a><span class=n>cv2</span><span class=o>.</span><span class=n>destroyAllWindows</span><span class=p>()</span>
<a id=__codelineno-2-38 name=__codelineno-2-38 href=#__codelineno-2-38></a>
<a id=__codelineno-2-39 name=__codelineno-2-39 href=#__codelineno-2-39></a><span class=c1># terminate the decoder</span>
<a id=__codelineno-2-40 name=__codelineno-2-40 href=#__codelineno-2-40></a><span class=n>decoder</span><span class=o>.</span><span class=n>terminate</span><span class=p>()</span>
</code></pre></div> <p>&nbsp;</p> <h2 id=generate-and-decode-frames-from-gradients-with-custom-text-effect>Generate and Decode frames from Gradients with custom Text effect<a class=headerlink href=#generate-and-decode-frames-from-gradients-with-custom-text-effect title="Anchor link to this section for reference">&para;</a></h2> <blockquote> <p>The <a href=https://ffmpeg.org/ffmpeg-filters.html#toc-gradients><code>gradients</code></a> graph (as name suggests) generates several random gradients.</p> </blockquote> <figure> <p><img alt="gradients test pattern" src=../../../assets/gifs/gradients.gif width=500> </p> <figcaption>Gradients pattern with real-time text output</figcaption> </figure> <p>In this example we will generate and decode <code>15</code> seconds of <strong>Gradients</strong> using <a href=https://ffmpeg.org/ffmpeg-filters.html#toc-gradients><code>gradients</code></a> graph source with <code>lavfi</code> input virtual device and also draw real-time text output <em>(format <code>HH::MM::SS</code>)</em> scrolling upward direction on it using <a href=https://ffmpeg.org/ffmpeg-filters.html#toc-drawtext-1><code>drawtext</code></a> filter in FFdecoder API, all while previewing decoded frames using OpenCV Library's <code>cv2.imshow()</code> method in real-time. </p> <div class="admonition warning"> <p class=admonition-title>This example assumes you're running <span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="m0 93.7 183.6-25.3v177.4H0V93.7zm0 324.6 183.6 25.3V268.4H0v149.9zm203.8 28L448 480V268.4H203.8v177.9zm0-380.6v180.1H448V32L203.8 65.7z"/></svg></span> Windows machine. If not, then change <code>fontfile</code> parameter path in <code>drawtext</code> video filtergraph definition accordingly.</p> </div> <div class="admonition alert"> <p class=admonition-title>By default, OpenCV expects <code>BGR</code> format frames in its <code>cv2.imshow()</code> method.</p> </div> <div class=highlight><pre><span></span><code><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=c1># import the necessary packages</span>
<a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a><span class=kn>from</span> <span class=nn>deffcode</span> <span class=kn>import</span> <span class=n>FFdecoder</span>
<a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a><span class=kn>import</span> <span class=nn>cv2</span>
<a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a>
<a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a><span class=c1># define parameters</span>
<a id=__codelineno-3-6 name=__codelineno-3-6 href=#__codelineno-3-6></a><span class=n>ffparams</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-3-7 name=__codelineno-3-7 href=#__codelineno-3-7></a>    <span class=s2>&quot;-ffprefixes&quot;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&quot;-t&quot;</span><span class=p>,</span> <span class=s2>&quot;15&quot;</span><span class=p>],</span>  <span class=c1># playback time of 15 seconds</span>
<a id=__codelineno-3-8 name=__codelineno-3-8 href=#__codelineno-3-8></a>    <span class=s2>&quot;-vf&quot;</span><span class=p>:</span> <span class=s2>&quot;drawtext=&quot;</span>  <span class=c1># draw text</span>
<a id=__codelineno-3-9 name=__codelineno-3-9 href=#__codelineno-3-9></a>    <span class=o>+</span> <span class=s2>&quot;text=&#39;%{localtime\:</span><span class=si>%X</span><span class=s2>}&#39;:&quot;</span>  <span class=c1># real time text (HH::MM::SS)</span>
<a id=__codelineno-3-10 name=__codelineno-3-10 href=#__codelineno-3-10></a>    <span class=o>+</span> <span class=s2>&quot;fontfile=&#39;c\:\/windows\/fonts\/arial.ttf&#39;:&quot;</span>  <span class=c1># fontfile path (Only Windows)</span>
<a id=__codelineno-3-11 name=__codelineno-3-11 href=#__codelineno-3-11></a>    <span class=o>+</span> <span class=s2>&quot;x=(w-text_w)/2:y=h-40*t:&quot;</span>  <span class=c1># scroll upward effect</span>
<a id=__codelineno-3-12 name=__codelineno-3-12 href=#__codelineno-3-12></a>    <span class=o>+</span> <span class=s2>&quot;fontsize=50:&quot;</span>  <span class=c1># font size 50</span>
<a id=__codelineno-3-13 name=__codelineno-3-13 href=#__codelineno-3-13></a>    <span class=o>+</span> <span class=s2>&quot;fontcolor=white&quot;</span><span class=p>,</span>  <span class=c1># font color white</span>
<a id=__codelineno-3-14 name=__codelineno-3-14 href=#__codelineno-3-14></a><span class=p>}</span>
<a id=__codelineno-3-15 name=__codelineno-3-15 href=#__codelineno-3-15></a>
<a id=__codelineno-3-16 name=__codelineno-3-16 href=#__codelineno-3-16></a>
<a id=__codelineno-3-17 name=__codelineno-3-17 href=#__codelineno-3-17></a><span class=c1># initialize and formulate the decoder with </span>
<a id=__codelineno-3-18 name=__codelineno-3-18 href=#__codelineno-3-18></a><span class=c1># &quot;gradients&quot; source for BGR24 output</span>
<a id=__codelineno-3-19 name=__codelineno-3-19 href=#__codelineno-3-19></a><span class=n>decoder</span> <span class=o>=</span> <span class=n>FFdecoder</span><span class=p>(</span>
<a id=__codelineno-3-20 name=__codelineno-3-20 href=#__codelineno-3-20></a>    <span class=s2>&quot;gradients=n=3&quot;</span><span class=p>,</span>
<a id=__codelineno-3-21 name=__codelineno-3-21 href=#__codelineno-3-21></a>    <span class=n>source_demuxer</span><span class=o>=</span><span class=s2>&quot;lavfi&quot;</span><span class=p>,</span>
<a id=__codelineno-3-22 name=__codelineno-3-22 href=#__codelineno-3-22></a>    <span class=n>frame_format</span><span class=o>=</span><span class=s2>&quot;bgr24&quot;</span><span class=p>,</span>
<a id=__codelineno-3-23 name=__codelineno-3-23 href=#__codelineno-3-23></a>    <span class=o>**</span><span class=n>ffparams</span>
<a id=__codelineno-3-24 name=__codelineno-3-24 href=#__codelineno-3-24></a><span class=p>)</span><span class=o>.</span><span class=n>formulate</span><span class=p>()</span>
<a id=__codelineno-3-25 name=__codelineno-3-25 href=#__codelineno-3-25></a>
<a id=__codelineno-3-26 name=__codelineno-3-26 href=#__codelineno-3-26></a><span class=c1># grab the BGR24 frame from the decoder</span>
<a id=__codelineno-3-27 name=__codelineno-3-27 href=#__codelineno-3-27></a><span class=k>for</span> <span class=n>frame</span> <span class=ow>in</span> <span class=n>decoder</span><span class=o>.</span><span class=n>generateFrame</span><span class=p>():</span>
<a id=__codelineno-3-28 name=__codelineno-3-28 href=#__codelineno-3-28></a>
<a id=__codelineno-3-29 name=__codelineno-3-29 href=#__codelineno-3-29></a>    <span class=c1># check if frame is None</span>
<a id=__codelineno-3-30 name=__codelineno-3-30 href=#__codelineno-3-30></a>    <span class=k>if</span> <span class=n>frame</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-3-31 name=__codelineno-3-31 href=#__codelineno-3-31></a>        <span class=k>break</span>
<a id=__codelineno-3-32 name=__codelineno-3-32 href=#__codelineno-3-32></a>
<a id=__codelineno-3-33 name=__codelineno-3-33 href=#__codelineno-3-33></a>    <span class=c1># {do something with the frame here}</span>
<a id=__codelineno-3-34 name=__codelineno-3-34 href=#__codelineno-3-34></a>
<a id=__codelineno-3-35 name=__codelineno-3-35 href=#__codelineno-3-35></a>    <span class=c1># Show output window</span>
<a id=__codelineno-3-36 name=__codelineno-3-36 href=#__codelineno-3-36></a>    <span class=n>cv2</span><span class=o>.</span><span class=n>imshow</span><span class=p>(</span><span class=s2>&quot;Output&quot;</span><span class=p>,</span> <span class=n>frame</span><span class=p>)</span>
<a id=__codelineno-3-37 name=__codelineno-3-37 href=#__codelineno-3-37></a>
<a id=__codelineno-3-38 name=__codelineno-3-38 href=#__codelineno-3-38></a>    <span class=c1># check for &#39;q&#39; key if pressed</span>
<a id=__codelineno-3-39 name=__codelineno-3-39 href=#__codelineno-3-39></a>    <span class=n>key</span> <span class=o>=</span> <span class=n>cv2</span><span class=o>.</span><span class=n>waitKey</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span> <span class=o>&amp;</span> <span class=mh>0xFF</span>
<a id=__codelineno-3-40 name=__codelineno-3-40 href=#__codelineno-3-40></a>    <span class=k>if</span> <span class=n>key</span> <span class=o>==</span> <span class=nb>ord</span><span class=p>(</span><span class=s2>&quot;q&quot;</span><span class=p>):</span>
<a id=__codelineno-3-41 name=__codelineno-3-41 href=#__codelineno-3-41></a>        <span class=k>break</span>
<a id=__codelineno-3-42 name=__codelineno-3-42 href=#__codelineno-3-42></a>
<a id=__codelineno-3-43 name=__codelineno-3-43 href=#__codelineno-3-43></a><span class=c1># close output window</span>
<a id=__codelineno-3-44 name=__codelineno-3-44 href=#__codelineno-3-44></a><span class=n>cv2</span><span class=o>.</span><span class=n>destroyAllWindows</span><span class=p>()</span>
<a id=__codelineno-3-45 name=__codelineno-3-45 href=#__codelineno-3-45></a>
<a id=__codelineno-3-46 name=__codelineno-3-46 href=#__codelineno-3-46></a><span class=c1># terminate the decoder</span>
<a id=__codelineno-3-47 name=__codelineno-3-47 href=#__codelineno-3-47></a><span class=n>decoder</span><span class=o>.</span><span class=n>terminate</span><span class=p>()</span>
</code></pre></div> <p>&nbsp;</p> <h2 id=generate-and-decode-frames-from-mandelbrot-test-pattern-with-vectorscope-waveforms>Generate and Decode frames from Mandelbrot test pattern with vectorscope &amp; waveforms<a class=headerlink href=#generate-and-decode-frames-from-mandelbrot-test-pattern-with-vectorscope-waveforms title="Anchor link to this section for reference">&para;</a></h2> <blockquote> <p>The <a href=https://ffmpeg.org/ffmpeg-filters.html#toc-mandelbrot><code>mandelbrot</code></a> graph generate a <a href=https://en.wikipedia.org/wiki/Mandelbrot_set><strong>Mandelbrot set fractal</strong></a>, that progressively zoom towards a specfic point.</p> </blockquote> <figure> <p><img alt="mandelbrot test pattern" src=../../../assets/gifs/mandelbrot_vectorscope_waveforms.gif width=500> </p> <figcaption>Mandelbrot pattern with a Vectorscope &amp; two Waveforms</figcaption> </figure> <p>In this example we will generate and decode <code>20</code> seconds of a <strong>Mandelbrot test pattern</strong> <em>(<code>1280x720</code> frame size &amp; <code>30</code> framerate)</em> using <a href=https://ffmpeg.org/ffmpeg-filters.html#toc-mandelbrot><code>mandelbrot</code></a> graph source with <code>lavfi</code> input virtual device with a <a href=https://www.studiobinder.com/blog/what-is-a-vectorscope-definition/ >vectorscope</a> <em>(plots 2 color component values)</em> &amp; two <a href=https://ffmpeg.org/ffmpeg-filters.html#toc-waveform>waveforms</a> <em>(plots YUV color component intensity)</em> stacked to it in FFdecoder API, all while previewing decoded frames using OpenCV Library's <code>cv2.imshow()</code> method in real-time. </p> <div class="admonition alert"> <p class=admonition-title>By default, OpenCV expects <code>BGR</code> format frames in its <code>cv2.imshow()</code> method.</p> </div> <div class=highlight><pre><span></span><code><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=c1># import the necessary packages</span>
<a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class=kn>from</span> <span class=nn>deffcode</span> <span class=kn>import</span> <span class=n>FFdecoder</span>
<a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a><span class=kn>import</span> <span class=nn>cv2</span>
<a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a>
<a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a><span class=c1># define parameters</span>
<a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a><span class=n>ffparams</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-4-7 name=__codelineno-4-7 href=#__codelineno-4-7></a>    <span class=s2>&quot;-ffprefixes&quot;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&quot;-t&quot;</span><span class=p>,</span> <span class=s2>&quot;20&quot;</span><span class=p>],</span>  <span class=c1># playback time of 20 seconds</span>
<a id=__codelineno-4-8 name=__codelineno-4-8 href=#__codelineno-4-8></a>    <span class=s2>&quot;-vf&quot;</span><span class=p>:</span> <span class=s2>&quot;format=yuv444p,&quot;</span> <span class=c1># change input format to yuv444p</span>
<a id=__codelineno-4-9 name=__codelineno-4-9 href=#__codelineno-4-9></a>    <span class=o>+</span> <span class=s2>&quot;split=4[a][b][c][d],&quot;</span> <span class=c1># split input into 4 identical outputs.</span>
<a id=__codelineno-4-10 name=__codelineno-4-10 href=#__codelineno-4-10></a>    <span class=o>+</span> <span class=s2>&quot;[a]waveform[aa],&quot;</span>  <span class=c1># apply waveform on first output</span>
<a id=__codelineno-4-11 name=__codelineno-4-11 href=#__codelineno-4-11></a>    <span class=o>+</span> <span class=s2>&quot;[b][aa]vstack[V],&quot;</span>  <span class=c1># vertical stack 2nd output with waveform [V]</span>
<a id=__codelineno-4-12 name=__codelineno-4-12 href=#__codelineno-4-12></a>    <span class=o>+</span> <span class=s2>&quot;[c]waveform=m=0[cc],&quot;</span>  <span class=c1># apply waveform on 3rd output</span>
<a id=__codelineno-4-13 name=__codelineno-4-13 href=#__codelineno-4-13></a>    <span class=o>+</span> <span class=s2>&quot;[d]vectorscope=color4[dd],&quot;</span>  <span class=c1># apply vectorscope on 4th output</span>
<a id=__codelineno-4-14 name=__codelineno-4-14 href=#__codelineno-4-14></a>    <span class=o>+</span> <span class=s2>&quot;[cc][dd]vstack[V2],&quot;</span>  <span class=c1># vertical stack waveform and vectorscope [V2]</span>
<a id=__codelineno-4-15 name=__codelineno-4-15 href=#__codelineno-4-15></a>    <span class=o>+</span> <span class=s2>&quot;[V][V2]hstack&quot;</span><span class=p>,</span>  <span class=c1># horizontal stack [V] and [V2] vertical stacks</span>
<a id=__codelineno-4-16 name=__codelineno-4-16 href=#__codelineno-4-16></a><span class=p>}</span>
<a id=__codelineno-4-17 name=__codelineno-4-17 href=#__codelineno-4-17></a>
<a id=__codelineno-4-18 name=__codelineno-4-18 href=#__codelineno-4-18></a><span class=c1># initialize and formulate the decoder with &quot;mandelbrot&quot; source of</span>
<a id=__codelineno-4-19 name=__codelineno-4-19 href=#__codelineno-4-19></a><span class=c1># `1280x720` frame size and `30` framerate for BGR24 output</span>
<a id=__codelineno-4-20 name=__codelineno-4-20 href=#__codelineno-4-20></a><span class=n>decoder</span> <span class=o>=</span> <span class=n>FFdecoder</span><span class=p>(</span>
<a id=__codelineno-4-21 name=__codelineno-4-21 href=#__codelineno-4-21></a>    <span class=s2>&quot;mandelbrot=size=1280x720:rate=30&quot;</span><span class=p>,</span>
<a id=__codelineno-4-22 name=__codelineno-4-22 href=#__codelineno-4-22></a>    <span class=n>source_demuxer</span><span class=o>=</span><span class=s2>&quot;lavfi&quot;</span><span class=p>,</span>
<a id=__codelineno-4-23 name=__codelineno-4-23 href=#__codelineno-4-23></a>    <span class=n>frame_format</span><span class=o>=</span><span class=s2>&quot;bgr24&quot;</span><span class=p>,</span>
<a id=__codelineno-4-24 name=__codelineno-4-24 href=#__codelineno-4-24></a>    <span class=o>**</span><span class=n>ffparams</span>
<a id=__codelineno-4-25 name=__codelineno-4-25 href=#__codelineno-4-25></a><span class=p>)</span><span class=o>.</span><span class=n>formulate</span><span class=p>()</span>
<a id=__codelineno-4-26 name=__codelineno-4-26 href=#__codelineno-4-26></a>
<a id=__codelineno-4-27 name=__codelineno-4-27 href=#__codelineno-4-27></a><span class=c1># grab the BGR24 frame from the decoder</span>
<a id=__codelineno-4-28 name=__codelineno-4-28 href=#__codelineno-4-28></a><span class=k>for</span> <span class=n>frame</span> <span class=ow>in</span> <span class=n>decoder</span><span class=o>.</span><span class=n>generateFrame</span><span class=p>():</span>
<a id=__codelineno-4-29 name=__codelineno-4-29 href=#__codelineno-4-29></a>
<a id=__codelineno-4-30 name=__codelineno-4-30 href=#__codelineno-4-30></a>    <span class=c1># check if frame is None</span>
<a id=__codelineno-4-31 name=__codelineno-4-31 href=#__codelineno-4-31></a>    <span class=k>if</span> <span class=n>frame</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-4-32 name=__codelineno-4-32 href=#__codelineno-4-32></a>        <span class=k>break</span>
<a id=__codelineno-4-33 name=__codelineno-4-33 href=#__codelineno-4-33></a>
<a id=__codelineno-4-34 name=__codelineno-4-34 href=#__codelineno-4-34></a>    <span class=c1># {do something with the frame here}</span>
<a id=__codelineno-4-35 name=__codelineno-4-35 href=#__codelineno-4-35></a>
<a id=__codelineno-4-36 name=__codelineno-4-36 href=#__codelineno-4-36></a>    <span class=c1># Show output window</span>
<a id=__codelineno-4-37 name=__codelineno-4-37 href=#__codelineno-4-37></a>    <span class=n>cv2</span><span class=o>.</span><span class=n>imshow</span><span class=p>(</span><span class=s2>&quot;Output&quot;</span><span class=p>,</span> <span class=n>frame</span><span class=p>)</span>
<a id=__codelineno-4-38 name=__codelineno-4-38 href=#__codelineno-4-38></a>
<a id=__codelineno-4-39 name=__codelineno-4-39 href=#__codelineno-4-39></a>    <span class=c1># check for &#39;q&#39; key if pressed</span>
<a id=__codelineno-4-40 name=__codelineno-4-40 href=#__codelineno-4-40></a>    <span class=n>key</span> <span class=o>=</span> <span class=n>cv2</span><span class=o>.</span><span class=n>waitKey</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span> <span class=o>&amp;</span> <span class=mh>0xFF</span>
<a id=__codelineno-4-41 name=__codelineno-4-41 href=#__codelineno-4-41></a>    <span class=k>if</span> <span class=n>key</span> <span class=o>==</span> <span class=nb>ord</span><span class=p>(</span><span class=s2>&quot;q&quot;</span><span class=p>):</span>
<a id=__codelineno-4-42 name=__codelineno-4-42 href=#__codelineno-4-42></a>        <span class=k>break</span>
<a id=__codelineno-4-43 name=__codelineno-4-43 href=#__codelineno-4-43></a>
<a id=__codelineno-4-44 name=__codelineno-4-44 href=#__codelineno-4-44></a><span class=c1># close output window</span>
<a id=__codelineno-4-45 name=__codelineno-4-45 href=#__codelineno-4-45></a><span class=n>cv2</span><span class=o>.</span><span class=n>destroyAllWindows</span><span class=p>()</span>
<a id=__codelineno-4-46 name=__codelineno-4-46 href=#__codelineno-4-46></a>
<a id=__codelineno-4-47 name=__codelineno-4-47 href=#__codelineno-4-47></a><span class=c1># terminate the decoder</span>
<a id=__codelineno-4-48 name=__codelineno-4-48 href=#__codelineno-4-48></a><span class=n>decoder</span><span class=o>.</span><span class=n>terminate</span><span class=p>()</span>
</code></pre></div> <p>&nbsp;</p> <h2 id=generate-and-decode-frames-from-game-of-life-visualization>Generate and Decode frames from Game of Life Visualization<a class=headerlink href=#generate-and-decode-frames-from-game-of-life-visualization title="Anchor link to this section for reference">&para;</a></h2> <blockquote> <p>The <a href=https://ffmpeg.org/ffmpeg-filters.html#toc-life><code>life</code></a> graph generates a life pattern based on a generalization of John Conway’s life game. The sourced input represents a life grid, each pixel represents a cell which can be in one of two possible states, alive or dead. Every cell interacts with its eight neighbours, which are the cells that are horizontally, vertically, or diagonally adjacent. At each interaction the grid evolves according to the adopted rule, which specifies the number of neighbor alive cells which will make a cell stay alive or born.</p> </blockquote> <figure> <p><img alt="life pattern" src=../../../assets/gifs/life.gif width=500> </p> <figcaption>Game of Life Visualization</figcaption> </figure> <p>In this example we will generate and decode <code>25</code> seconds of <strong>Game of Life Visualization</strong> using <a href=https://ffmpeg.org/ffmpeg-filters.html#toc-life><code>life</code></a> graph source with <code>lavfi</code> input virtual device in FFdecoder API, all while previewing decoded frames using OpenCV Library's <code>cv2.imshow()</code> method in real-time. </p> <div class="admonition alert"> <p class=admonition-title>By default, OpenCV expects <code>BGR</code> format frames in its <code>cv2.imshow()</code> method.</p> </div> <div class=highlight><pre><span></span><code><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=c1># import the necessary packages</span>
<a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a><span class=kn>from</span> <span class=nn>deffcode</span> <span class=kn>import</span> <span class=n>FFdecoder</span>
<a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a><span class=kn>import</span> <span class=nn>cv2</span>
<a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a>
<a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a><span class=c1># define parameters</span>
<a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a><span class=n>ffparams</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-5-7 name=__codelineno-5-7 href=#__codelineno-5-7></a>    <span class=s2>&quot;-ffprefixes&quot;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&quot;-t&quot;</span><span class=p>,</span> <span class=s2>&quot;25&quot;</span><span class=p>],</span>  <span class=c1># playback time of 25 seconds</span>
<a id=__codelineno-5-8 name=__codelineno-5-8 href=#__codelineno-5-8></a><span class=p>}</span>
<a id=__codelineno-5-9 name=__codelineno-5-9 href=#__codelineno-5-9></a>
<a id=__codelineno-5-10 name=__codelineno-5-10 href=#__codelineno-5-10></a><span class=c1># initialize and formulate the decoder with &quot;life&quot; source for BGR24 output</span>
<a id=__codelineno-5-11 name=__codelineno-5-11 href=#__codelineno-5-11></a><span class=n>decoder</span> <span class=o>=</span> <span class=n>FFdecoder</span><span class=p>(</span>
<a id=__codelineno-5-12 name=__codelineno-5-12 href=#__codelineno-5-12></a>    <span class=s2>&quot;life=&quot;</span>  <span class=c1># life graph</span>
<a id=__codelineno-5-13 name=__codelineno-5-13 href=#__codelineno-5-13></a>    <span class=o>+</span> <span class=s2>&quot;s=640x480:&quot;</span>  <span class=c1># grid size (in pixels)</span>
<a id=__codelineno-5-14 name=__codelineno-5-14 href=#__codelineno-5-14></a>    <span class=o>+</span> <span class=s2>&quot;mold=10:&quot;</span>  <span class=c1># cell mold speed</span>
<a id=__codelineno-5-15 name=__codelineno-5-15 href=#__codelineno-5-15></a>    <span class=o>+</span> <span class=s2>&quot;r=36:&quot;</span>  <span class=c1># framerate</span>
<a id=__codelineno-5-16 name=__codelineno-5-16 href=#__codelineno-5-16></a>    <span class=o>+</span> <span class=s2>&quot;ratio=0.5:&quot;</span>  <span class=c1># random fill ratio for the initial random grid</span>
<a id=__codelineno-5-17 name=__codelineno-5-17 href=#__codelineno-5-17></a>    <span class=o>+</span> <span class=s2>&quot;death_color=#39FF14:&quot;</span>  <span class=c1># color of dead cells</span>
<a id=__codelineno-5-18 name=__codelineno-5-18 href=#__codelineno-5-18></a>    <span class=o>+</span> <span class=s2>&quot;life_color=#1d1160&quot;</span> <span class=c1># color of living (or new born) cells</span>
<a id=__codelineno-5-19 name=__codelineno-5-19 href=#__codelineno-5-19></a>    <span class=o>+</span> <span class=s2>&quot;,scale=640:480:&quot;</span> <span class=c1># frame size</span>
<a id=__codelineno-5-20 name=__codelineno-5-20 href=#__codelineno-5-20></a>    <span class=o>+</span> <span class=s2>&quot;flags=16&quot;</span><span class=p>,</span>
<a id=__codelineno-5-21 name=__codelineno-5-21 href=#__codelineno-5-21></a>    <span class=n>source_demuxer</span><span class=o>=</span><span class=s2>&quot;lavfi&quot;</span><span class=p>,</span>
<a id=__codelineno-5-22 name=__codelineno-5-22 href=#__codelineno-5-22></a>    <span class=n>frame_format</span><span class=o>=</span><span class=s2>&quot;bgr24&quot;</span><span class=p>,</span>
<a id=__codelineno-5-23 name=__codelineno-5-23 href=#__codelineno-5-23></a>    <span class=o>**</span><span class=n>ffparams</span>
<a id=__codelineno-5-24 name=__codelineno-5-24 href=#__codelineno-5-24></a><span class=p>)</span><span class=o>.</span><span class=n>formulate</span><span class=p>()</span>
<a id=__codelineno-5-25 name=__codelineno-5-25 href=#__codelineno-5-25></a>
<a id=__codelineno-5-26 name=__codelineno-5-26 href=#__codelineno-5-26></a><span class=c1># grab the BGR24 frame from the decoder</span>
<a id=__codelineno-5-27 name=__codelineno-5-27 href=#__codelineno-5-27></a><span class=k>for</span> <span class=n>frame</span> <span class=ow>in</span> <span class=n>decoder</span><span class=o>.</span><span class=n>generateFrame</span><span class=p>():</span>
<a id=__codelineno-5-28 name=__codelineno-5-28 href=#__codelineno-5-28></a>
<a id=__codelineno-5-29 name=__codelineno-5-29 href=#__codelineno-5-29></a>    <span class=c1># check if frame is None</span>
<a id=__codelineno-5-30 name=__codelineno-5-30 href=#__codelineno-5-30></a>    <span class=k>if</span> <span class=n>frame</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-5-31 name=__codelineno-5-31 href=#__codelineno-5-31></a>        <span class=k>break</span>
<a id=__codelineno-5-32 name=__codelineno-5-32 href=#__codelineno-5-32></a>
<a id=__codelineno-5-33 name=__codelineno-5-33 href=#__codelineno-5-33></a>    <span class=c1># {do something with the frame here}</span>
<a id=__codelineno-5-34 name=__codelineno-5-34 href=#__codelineno-5-34></a>
<a id=__codelineno-5-35 name=__codelineno-5-35 href=#__codelineno-5-35></a>    <span class=c1># Show output window</span>
<a id=__codelineno-5-36 name=__codelineno-5-36 href=#__codelineno-5-36></a>    <span class=n>cv2</span><span class=o>.</span><span class=n>imshow</span><span class=p>(</span><span class=s2>&quot;Output&quot;</span><span class=p>,</span> <span class=n>frame</span><span class=p>)</span>
<a id=__codelineno-5-37 name=__codelineno-5-37 href=#__codelineno-5-37></a>
<a id=__codelineno-5-38 name=__codelineno-5-38 href=#__codelineno-5-38></a>    <span class=c1># check for &#39;q&#39; key if pressed</span>
<a id=__codelineno-5-39 name=__codelineno-5-39 href=#__codelineno-5-39></a>    <span class=n>key</span> <span class=o>=</span> <span class=n>cv2</span><span class=o>.</span><span class=n>waitKey</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span> <span class=o>&amp;</span> <span class=mh>0xFF</span>
<a id=__codelineno-5-40 name=__codelineno-5-40 href=#__codelineno-5-40></a>    <span class=k>if</span> <span class=n>key</span> <span class=o>==</span> <span class=nb>ord</span><span class=p>(</span><span class=s2>&quot;q&quot;</span><span class=p>):</span>
<a id=__codelineno-5-41 name=__codelineno-5-41 href=#__codelineno-5-41></a>        <span class=k>break</span>
<a id=__codelineno-5-42 name=__codelineno-5-42 href=#__codelineno-5-42></a>
<a id=__codelineno-5-43 name=__codelineno-5-43 href=#__codelineno-5-43></a><span class=c1># close output window</span>
<a id=__codelineno-5-44 name=__codelineno-5-44 href=#__codelineno-5-44></a><span class=n>cv2</span><span class=o>.</span><span class=n>destroyAllWindows</span><span class=p>()</span>
<a id=__codelineno-5-45 name=__codelineno-5-45 href=#__codelineno-5-45></a>
<a id=__codelineno-5-46 name=__codelineno-5-46 href=#__codelineno-5-46></a><span class=c1># terminate the decoder</span>
<a id=__codelineno-5-47 name=__codelineno-5-47 href=#__codelineno-5-47></a><span class=n>decoder</span><span class=o>.</span><span class=n>terminate</span><span class=p>()</span>
</code></pre></div> <p>&nbsp;</p> <hr> <div class=md-source-file> <small> Last update: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">January 10, 2023</span> </small> </div> <footer class=sponsorship> <hr> <a href=https://ko-fi.com/W7W8WTYO> <span class="twemoji heart-throb-hover"> <img alt=❤ class="twemoji heart" src=https://twemoji.maxcdn.com/v/latest/svg/2764.svg title=Donate> </span> </a> <hr> </footer> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2021 Abhishek Thakur(@abhiTronix) </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/abhiTronix target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href=https://gitter.im/deffcode-python/community target=_blank rel=noopener title=gitter.im class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 384 512"><!-- Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M66.4 322.5H16V0h50.4v322.5zM166.9 76.1h-50.4V512h50.4V76.1zm100.6 0h-50.4V512h50.4V76.1zM368 76h-50.4v247H368V76z"/></svg> </a> <a href=https://www.linkedin.com/in/abhishek-singh-thakur-a37845a5 target=_blank rel=noopener title=www.linkedin.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg> </a> <a href=https://dev.to/abhitronix target=_blank rel=noopener title=dev.to class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M120.12 208.29c-3.88-2.9-7.77-4.35-11.65-4.35H91.03v104.47h17.45c3.88 0 7.77-1.45 11.65-4.35 3.88-2.9 5.82-7.25 5.82-13.06v-69.65c-.01-5.8-1.96-10.16-5.83-13.06zM404.1 32H43.9C19.7 32 .06 51.59 0 75.8v360.4C.06 460.41 19.7 480 43.9 480h360.2c24.21 0 43.84-19.59 43.9-43.8V75.8c-.06-24.21-19.7-43.8-43.9-43.8zM154.2 291.19c0 18.81-11.61 47.31-48.36 47.25h-46.4V172.98h47.38c35.44 0 47.36 28.46 47.37 47.28l.01 70.93zm100.68-88.66H201.6v38.42h32.57v29.57H201.6v38.41h53.29v29.57h-62.18c-11.16.29-20.44-8.53-20.72-19.69V193.7c-.27-11.15 8.56-20.41 19.71-20.69h63.19l-.01 29.52zm103.64 115.29c-13.2 30.75-36.85 24.63-47.44 0l-38.53-144.8h32.57l29.71 113.72 29.57-113.72h32.58l-38.46 144.8z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["navigation.tracking", "navigation.tabs", "navigation.indexes", "navigation.top", "search.suggest", "search.highlight", "search.share", "content.code.annotate", "content.code.copy", "content.tabs.link"], "search": "../../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script> <script src=../../../assets/javascripts/bundle.b4d07000.min.js></script> <script src=../../../assets/javascripts/extra.js></script> </body> </html>